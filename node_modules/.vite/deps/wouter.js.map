{
  "version": 3,
  "sources": ["../../wouter/react-deps.js", "../../wouter/use-location.js", "../../wouter/matcher.js", "../../wouter/index.js"],
  "sourcesContent": ["import { useEffect, useLayoutEffect } from \"react\";\n\nexport {\n  useRef,\n  useEffect,\n  useState,\n  useContext,\n  useCallback,\n  createContext,\n  isValidElement,\n  cloneElement,\n  createElement,\n  Fragment,\n  forwardRef,\n} from \"react\";\n\n// React currently throws a warning when using useLayoutEffect on the server.\n// To get around it, we can conditionally useEffect on the server (no-op) and\n// useLayoutEffect in the browser.\n\n// See Redux's source code for reference:\n// https://github.com/reduxjs/react-redux/blob/master/src/utils/useIsomorphicLayoutEffect.ts\nexport const canUseDOM = !!(\n  typeof window !== \"undefined\" &&\n  typeof window.document !== \"undefined\" &&\n  typeof window.document.createElement !== \"undefined\"\n);\n\nexport const useIsomorphicLayoutEffect = canUseDOM\n  ? useLayoutEffect\n  : useEffect;\n", "import { useEffect, useRef, useState, useCallback } from \"./react-deps.js\";\n\n/*\n * Transforms `path` into its relative `base` version\n * If base isn't part of the path provided returns absolute path e.g. `~/app`\n */\nexport const relativePath = (base, path = location.pathname) =>\n  !path.toLowerCase().indexOf(base.toLowerCase())\n    ? path.slice(base.length) || \"/\"\n    : \"~\" + path;\n\n/**\n * History API docs @see https://developer.mozilla.org/en-US/docs/Web/API/History\n */\nconst eventPopstate = \"popstate\";\nconst eventPushState = \"pushState\";\nconst eventReplaceState = \"replaceState\";\nexport const events = [eventPopstate, eventPushState, eventReplaceState];\n\nexport default ({ base = \"\" } = {}) => {\n  const [{ path }, update] = useState(() => ({ path: relativePath(base) }));\n  // @see https://reactjs.org/docs/hooks-reference.html#lazy-initial-state\n  const prevHash = useRef(path + location.search);\n\n  useEffect(() => {\n    // this function checks if the location has been changed since the\n    // last render and updates the state only when needed.\n    // unfortunately, we can't rely on `path` value here, since it can be stale,\n    // that's why we store the last pathname in a ref.\n    const checkForUpdates = () => {\n      const pathname = relativePath(base);\n      const hash = pathname + location.search;\n\n      if (prevHash.current !== hash) {\n        prevHash.current = hash;\n        update({ path: pathname });\n      }\n    };\n\n    events.forEach((e) => addEventListener(e, checkForUpdates));\n\n    // it's possible that an update has occurred between render and the effect handler,\n    // so we run additional check on mount to catch these updates. Based on:\n    // https://gist.github.com/bvaughn/e25397f70e8c65b0ae0d7c90b731b189\n    checkForUpdates();\n\n    return () => events.forEach((e) => removeEventListener(e, checkForUpdates));\n  }, [base]);\n\n  // the 2nd argument of the `useLocation` return value is a function\n  // that allows to perform a navigation.\n  //\n  // the function reference should stay the same between re-renders, so that\n  // it can be passed down as an element prop without any performance concerns.\n  const navigate = useCallback(\n    (to, { replace = false } = {}) =>\n      history[replace ? eventReplaceState : eventPushState](\n        null,\n        \"\",\n        // handle nested routers and absolute paths\n        to[0] === \"~\" ? to.slice(1) : base + to\n      ),\n    [base]\n  );\n\n  return [path, navigate];\n};\n\n// While History API does have `popstate` event, the only\n// proper way to listen to changes via `push/replaceState`\n// is to monkey-patch these methods.\n//\n// See https://stackoverflow.com/a/4585031\nif (typeof history !== \"undefined\") {\n  for (const type of [eventPushState, eventReplaceState]) {\n    const original = history[type];\n\n    history[type] = function () {\n      const result = original.apply(this, arguments);\n      const event = new Event(type);\n      event.arguments = arguments;\n\n      dispatchEvent(event);\n      return result;\n    };\n  }\n}\n", "// creates a matcher function\nexport default function makeMatcher(makeRegexpFn = pathToRegexp) {\n  let cache = {};\n\n  // obtains a cached regexp version of the pattern\n  const getRegexp = (pattern) =>\n    cache[pattern] || (cache[pattern] = makeRegexpFn(pattern));\n\n  return (pattern, path) => {\n    const { regexp, keys } = getRegexp(pattern || \"\");\n    const out = regexp.exec(path);\n\n    if (!out) return [false, null];\n\n    // formats an object with matched params\n    const params = keys.reduce((params, key, i) => {\n      params[key.name] = out[i + 1];\n      return params;\n    }, {});\n\n    return [true, params];\n  };\n}\n\n// escapes a regexp string (borrowed from path-to-regexp sources)\n// https://github.com/pillarjs/path-to-regexp/blob/v3.0.0/index.js#L202\nconst escapeRx = (str) => str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n\n// returns a segment representation in RegExp based on flags\n// adapted and simplified version from path-to-regexp sources\nconst rxForSegment = (repeat, optional, prefix) => {\n  let capture = repeat ? \"((?:[^\\\\/]+?)(?:\\\\/(?:[^\\\\/]+?))*)\" : \"([^\\\\/]+?)\";\n  if (optional && prefix) capture = \"(?:\\\\/\" + capture + \")\";\n  return capture + (optional ? \"?\" : \"\");\n};\n\nconst pathToRegexp = (pattern) => {\n  const groupRx = /:([A-Za-z0-9_]+)([?+*]?)/g;\n\n  let match = null,\n    lastIndex = 0,\n    keys = [],\n    result = \"\";\n\n  while ((match = groupRx.exec(pattern)) !== null) {\n    const [_, segment, mod] = match;\n\n    // :foo  [1]      (  )\n    // :foo? [0 - 1]  ( o)\n    // :foo+ [1 - ∞]  (r )\n    // :foo* [0 - ∞]  (ro)\n    const repeat = mod === \"+\" || mod === \"*\";\n    const optional = mod === \"?\" || mod === \"*\";\n    const prefix = optional && pattern[match.index - 1] === \"/\" ? 1 : 0;\n\n    const prev = pattern.substring(lastIndex, match.index - prefix);\n\n    keys.push({ name: segment });\n    lastIndex = groupRx.lastIndex;\n\n    result += escapeRx(prev) + rxForSegment(repeat, optional, prefix);\n  }\n\n  result += escapeRx(pattern.substring(lastIndex));\n  return { keys, regexp: new RegExp(\"^\" + result + \"(?:\\\\/)?$\", \"i\") };\n};\n", "import locationHook from \"./use-location.js\";\nimport matcherWithCache from \"./matcher.js\";\n\nimport {\n  useRef,\n  useContext,\n  useCallback,\n  createContext,\n  isValidElement,\n  cloneElement,\n  createElement as h,\n  Fragment,\n  useState,\n  forwardRef,\n  useIsomorphicLayoutEffect,\n} from \"./react-deps.js\";\n\n/*\n * Router and router context. Router is a lightweight object that represents the current\n * routing options: how location is managed, base path etc.\n *\n * There is a default router present for most of the use cases, however it can be overriden\n * via the <Router /> component.\n */\n\nconst defaultRouter = {\n  hook: locationHook,\n  matcher: matcherWithCache(),\n  base: \"\",\n};\n\nconst RouterCtx = createContext(defaultRouter);\n\n// gets the closes parent router from the context\nexport const useRouter = () => useContext(RouterCtx);\n\n/*\n * Part 1, Hooks API: useRoute and useLocation\n */\n\nexport const useLocation = () => {\n  const router = useRouter();\n  return router.hook(router);\n};\n\nexport const useRoute = (pattern) => {\n  const [path] = useLocation();\n  return useRouter().matcher(pattern, path);\n};\n\n// internal hook used by Link and Redirect in order to perform navigation\nconst useNavigate = (options) => {\n  const navRef = useRef();\n  const [, navigate] = useLocation();\n\n  navRef.current = () => navigate(options.to || options.href, options);\n  return navRef;\n};\n\n/*\n * Part 2, Low Carb Router API: Router, Route, Link, Switch\n */\n\nexport const Router = ({ hook, matcher, base = \"\", parent, children }) => {\n  // updates the current router with the props passed down to the component\n  const updateRouter = (router, proto = parent || defaultRouter) => {\n    router.hook = hook || proto.hook;\n    router.matcher = matcher || proto.matcher;\n    router.base = proto.base + base;\n\n    // store reference to parent router\n    router.parent = parent;\n\n    return router;\n  };\n\n  // we use `useState` here, but it only catches the first render and never changes.\n  // https://reactjs.org/docs/hooks-faq.html#how-to-create-expensive-objects-lazily\n  const [value] = useState(() => updateRouter({})); // create the object once...\n  useIsomorphicLayoutEffect(() => {\n    updateRouter(value);\n  }); // ...then update it on each render\n\n  return h(RouterCtx.Provider, {\n    value,\n    children,\n  });\n};\n\nexport const Route = ({ path, match, component, children }) => {\n  const useRouteMatch = useRoute(path);\n\n  // `props.match` is present - Route is controlled by the Switch\n  const [matches, params] = match || useRouteMatch;\n\n  if (!matches) return null;\n\n  // React-Router style `component` prop\n  if (component) return h(component, { params });\n\n  // support render prop or plain children\n  return typeof children === \"function\" ? children(params) : children;\n};\n\nexport const Link = forwardRef((props, ref) => {\n  const navRef = useNavigate(props);\n  const { base } = useRouter();\n\n  let { to, href = to, children, onClick } = props;\n\n  const handleClick = useCallback(\n    (event) => {\n      // ignores the navigation when clicked using right mouse button or\n      // by holding a special modifier key: ctrl, command, win, alt, shift\n      if (\n        event.ctrlKey ||\n        event.metaKey ||\n        event.altKey ||\n        event.shiftKey ||\n        event.button !== 0\n      )\n        return;\n\n      onClick && onClick(event);\n      if (!event.defaultPrevented) {\n        event.preventDefault();\n        navRef.current();\n      }\n    },\n    // navRef is a ref so it never changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [onClick]\n  );\n\n  // wraps children in `a` if needed\n  const extraProps = {\n    // handle nested routers and absolute paths\n    href: href[0] === \"~\" ? href.slice(1) : base + href,\n    onClick: handleClick,\n    to: null,\n    ref,\n  };\n  const jsx = isValidElement(children) ? children : h(\"a\", props);\n\n  return cloneElement(jsx, extraProps);\n});\n\nconst flattenChildren = (children) => {\n  return Array.isArray(children)\n    ? [].concat(\n        ...children.map((c) =>\n          c && c.type === Fragment\n            ? flattenChildren(c.props.children)\n            : flattenChildren(c)\n        )\n      )\n    : [children];\n};\n\nexport const Switch = ({ children, location }) => {\n  const { matcher } = useRouter();\n  const [originalLocation] = useLocation();\n\n  for (const element of flattenChildren(children)) {\n    let match = 0;\n\n    if (\n      isValidElement(element) &&\n      // we don't require an element to be of type Route,\n      // but we do require it to contain a truthy `path` prop.\n      // this allows to use different components that wrap Route\n      // inside of a switch, for example <AnimatedRoute />.\n      (match = element.props.path\n        ? matcher(element.props.path, location || originalLocation)\n        : [true, {}])[0]\n    )\n      return cloneElement(element, { match });\n  }\n\n  return null;\n};\n\nexport const Redirect = (props) => {\n  const navRef = useNavigate(props);\n\n  // empty array means running the effect once, navRef is a ref so it never changes\n  useIsomorphicLayoutEffect(() => {\n    navRef.current();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return null;\n};\n\nexport default useRoute;\n"],
  "mappings": "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",
  "names": ["import_react", "params", "location"]
}
